{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>Magma is an open source 4G and 5G core network. Use it to operate your own private mobile  network. Magma enables better connectivity by:</p> <ul> <li>Allowing operators to offer cellular service without vendor lock-in with a modern, open source core network.</li> <li>Enabling operators to manage their networks more efficiently with more automation, less downtime, better predictability, and more agility to add new services and applications.</li> <li>Enabling federation between existing MNOs and new infrastructure providers for expanding rural infrastructure.</li> <li>Allowing operators who are constrained with licensed spectrum to add capacity and reach by using Wi-Fi and CBRS.</li> </ul> <p>To learn more about Magma, visit the official website.</p>"},{"location":"#charmed-magma","title":"Charmed Magma","text":"<p>Charmed Magma is a distribution of Magma published by Canonical built to work with  Juju. It is the easiest way to operate Magma. It provides the simplest setup, integration and  lifecycle management options.</p> <ul> <li>Works on all clouds: Charmed Magma is not opinionated about your choice of cloud. It can also  run on your personnal computer.</li> <li>Integrations: Charmed Magma offers seamless integration between each component and with  standard monitoring tools.</li> <li>Automation: Charmed Magma automates the initial setup and most operations.</li> </ul>"},{"location":"how-to/deploy_charmed_magma_access_gateway/","title":"Deploy Charmed Magma Access Gateway","text":""},{"location":"how-to/deploy_charmed_magma_access_gateway/#requirements","title":"Requirements","text":"<p>The Access Gateway must be installed on an Ubuntu machine with the following specifications:</p> <ul> <li> Operating System: Ubuntu 20.04 LTS with Linux Kernel 5.4</li> <li> Processor: x86-64 dual-core processor (around 2GHz clock speed or faster)</li> <li> Memory: 4GB RAM</li> <li> Storage: 32GB or greater SSD</li> <li> Networking: At least two ethernet interfaces (SGi for internet connectivity and S1 for enodeB connectivity)</li> </ul> <p>Danger</p> <p>Installing this charm will affect the target computer's networking configuration. Make sure it is installed on designated hardware (personal computers are strongly discouraged).</p> <p>Info</p> <p>Some clouds like AWS use newer kernel versions by default. If you want to downgrade your kernel, please refer to the following guide.</p>"},{"location":"how-to/deploy_charmed_magma_access_gateway/#install-magma-access-gateway","title":"Install Magma Access Gateway","text":"Option 1: DHCP network configurationOption 2: Static network configuration <p>Deploy Magma Access Gateway: <pre><code>juju deploy magma-access-gateway-operator --config sgi=enp0s1 --config s1=enp0s2 --channel=1.6/stable\n</code></pre></p> <p>Info</p> <p>The interface names will need to be adjusted based on your specific machine.</p> <p>Create a file called <code>agw_config.yaml</code> that contains the following content:</p> <pre><code>---\nmagma-access-gateway-operator:\nsgi: enp0s1\nsgi-ipv4-address: 192.168.0.2/24\nsgi-ipv4-gateway: 192.168.0.1\nsgi-ipv6-address: fd7d:3797:378b:a502::2/64\nsgi-ipv6-gateway: fd7d:3797:378b:a502::1\ns1: enp0s2\ns1-ipv4-address: 192.168.1.2/24\ns1-ipv6-address: fd7d:3797:378b:a503::2/64\ndns: '[\"8.8.8.8\", \"208.67.222.222\"]'\n</code></pre> <p>Info</p> <p>The interface names and IP addresses will need to be adjusted based on your specific machine.</p> <p>Deploy Magma Access Gateway:</p> <pre><code>juju deploy magma-access-gateway-operator --config agw_config.yaml --channel=1.6/stable\n</code></pre>"},{"location":"how-to/deploy_charmed_magma_orchestrator/","title":"Deploy Charmed Magma Orchestrator 1.6","text":""},{"location":"how-to/deploy_charmed_magma_orchestrator/#requirements","title":"Requirements","text":"<p>The Orchestrator must be installed on a Kubernetes cluster with the following specifications:</p> <ul> <li> Kubernetes: A cluster with a total of a minimum of 6 vCPUs and 16 GB of RAM.</li> <li> Juju 2.9: A Juju controller with access to the Kubernetes cluster</li> </ul> <p>Note</p> <p>If the Juju controller is running on your Kubernetes cluster, it should use a LoadBalancer service type</p>"},{"location":"how-to/deploy_charmed_magma_orchestrator/#deploy-the-magma-orc8r-bundle","title":"Deploy the magma-orc8r bundle","text":"<p>Create an <code>overlay.yaml</code> file that contains the following content:</p> overlay.yaml<pre><code>applications:\nfluentd:\noptions:\ndomain: &lt;your domain name&gt;\nelasticsearch-url: &lt;your elasticsearch https url&gt;\norc8r-certifier:\noptions:\ndomain: &lt;your domain name&gt;\norc8r-eventd:\noptions:\nelasticsearch-url: &lt;your elasticsearch http url&gt;\norc8r-nginx:\noptions:\ndomain: &lt;your domain name&gt;\ntls-certificates-operator:\noptions:\ngenerate-self-signed-certificates: true\nca-common-name: rootca.&lt;your domain name&gt;\n</code></pre> <p>Warning</p> <p>This configuration is unsecure because it uses self-signed certificates.</p> <p>Info</p> <p>Elasticsearch is not part of the magma-orc8r bundle and needs to be deployed separately.  For details regarding Elasticsearch integration please visit Integrate Charmed Magma Orchestrator to Elasticsearch</p> <p>Deploy Orchestrator:</p> <pre><code>juju deploy magma-orc8r --overlay overlay.yaml --trust --channel=1.6/stable\n</code></pre> <p>The deployment is completed when all services are in the <code>Active-Idle</code> state.</p>"},{"location":"how-to/deploy_charmed_magma_orchestrator/#import-the-admin-operator-https-certificate","title":"Import the admin operator HTTPS certificate","text":"<p>Retrieve the PFX package that contains the certificates to authenticate against Magma Orchestrator:</p> <pre><code>juju scp --container=\"magma-orc8r-certifier\" orc8r-certifier/0:/var/opt/magma/certs/admin_operator.pfx admin_operator.pfx\n</code></pre> <p>Retrieve the pfx package password:</p> <pre><code>juju run-action orc8r-certifier/leader get-pfx-package-password --wait\n</code></pre> <p>Info</p> <p>The pfx package was copied to your current working directory. It can now be loaded in your browser or used to make API calls to Magma orchestrator.</p>"},{"location":"how-to/deploy_charmed_magma_orchestrator/#setup-dns","title":"Setup DNS","text":"<p>Retrieve the services that need to be exposed:</p> <pre><code>juju run-action orc8r-orchestrator/leader get-load-balancer-services --wait\n</code></pre> <p>In your domain registrar, create A records for the following Kubernetes services:</p> Address Hostname <code>&lt;orc8r-bootstrap-nginx External IP&gt;</code> <code>bootstrapper-controller.&lt;your domain&gt;</code> <code>&lt;orc8r-nginx-proxy External IP&gt;</code> <code>api.&lt;your domain&gt;</code> <code>&lt;orc8r-clientcert-nginx External IP&gt;</code> <code>controller.&lt;your domain&gt;</code> <code>&lt;nginx-proxy External IP&gt;</code> <code>*.nms.&lt;your domain&gt;</code> <code>&lt;fluentd External IP&gt;</code> <code>fluentd.&lt;your domain&gt;</code>"},{"location":"how-to/deploy_charmed_magma_orchestrator/#verify-the-deployment","title":"Verify the deployment","text":"<p>Get the master organization's username and password:</p> <pre><code>juju run-action nms-magmalte/leader get-master-admin-credentials --wait\n</code></pre> <p>Confirm successful deployment by visiting <code>https://master.nms.&lt;your domain&gt;</code> and logging in with the <code>admin-username</code> and <code>admin-password</code> outputted here.</p>"},{"location":"how-to/integrate_charmed_magma_access_gateway_to_orchestrator/","title":"Integrate Charmed Magma Access Gateway with Orchestrator","text":""},{"location":"how-to/integrate_charmed_magma_access_gateway_to_orchestrator/#relate-the-access-gateway-with-the-orchestrator","title":"Relate the Access Gateway with the Orchestrator","text":"<p>Offer the orchestrator relation outside of the orchestrator model:</p> <pre><code>juju offer orc8r-nginx:orchestrator\n</code></pre> <p>Configure the Access Gateway to connect to the Orchestrator:</p> <pre><code>juju relate magma-access-gateway-operator [[&lt;controller&gt;:]&lt;user&gt;/]&lt;model-name&gt;.orc8r-nginx\n</code></pre> <p>Fetch the Access Gateway's <code>Hardware ID</code> and <code>Challenge Key</code>:</p> <pre><code>juju run-action magma-access-gateway-operator/&lt;unit number&gt; get-access-gateway-secrets --wait\n</code></pre> <p>Navigate to \"Equipment\" on the NMS via the left navigation bar, hit \"Add Gateway\" on the upper right, and fill out the multi-step modal form. Use the secrets from above for the \"Hardware UUID\" and \"Challenge Key\" fields.</p>"},{"location":"how-to/integrate_charmed_magma_access_gateway_to_orchestrator/#verify-the-deployment","title":"Verify the deployment","text":"<p>Run the following command:</p> <pre><code>juju run-action magma-access-gateway-operator/&lt;unit number&gt; post-install-checks --wait\n</code></pre> <p>Info</p> <p>Successful Access Gateway deployment will be indicated by the <code>Magma AGW post-installation checks finished successfully.</code> message.</p>"},{"location":"how-to/integrate_charmed_magma_access_gateway_to_srsRAN/","title":"Integrate Charmed Magma Access Gateway to an srsRAN eNodeB","text":"<p>To relate Access Gateway to the srsRAN operator:</p> <pre><code>juju relate magma-access-gateway-operator &lt;srsRAN application name&gt;\n</code></pre>"},{"location":"how-to/integrate_charmed_magma_orchestrator_to_elasticsearch/","title":"Integrate Charmed Magma Orchestrator to Elasticsearch","text":""},{"location":"how-to/integrate_charmed_magma_orchestrator_to_elasticsearch/#requirements","title":"Requirements","text":"<ul> <li>Elasticsearch instance supporting both <code>HTTP</code> and <code>HTTPS</code> requests</li> <li>Connectivity between the Orchestrator and the Elasticsearch</li> </ul>"},{"location":"how-to/integrate_charmed_magma_orchestrator_to_elasticsearch/#integration","title":"Integration","text":"Option 1: Integration upon deploymentOption 2: Integration to a running Orchestrator instance <p>Create an <code>overlay.yaml</code> file that contains the following content:</p> overlay.yaml<pre><code>applications:\nfluentd:\noptions:\ndomain: &lt;your domain name&gt;\nelasticsearch-url: &lt;your elasticsearch https url&gt;\norc8r-certifier:\noptions:\ndomain: &lt;your domain name&gt;\norc8r-eventd:\noptions:\nelasticsearch-url: &lt;your elasticsearch http url&gt;\norc8r-nginx:\noptions:\ndomain: &lt;your domain name&gt;\ntls-certificates-operator:\noptions:\ngenerate-self-signed-certificates: true\nca-common-name: rootca.&lt;your domain name&gt;\n</code></pre> <p>Deploy <code>Charmed Magma Orchestrator</code> as described in Deploy Charmed Magma Orchestrator</p> <p>Configure <code>elasticsearch-url</code> in the <code>fluentd</code> charm:</p> <pre><code>juju config fluentd elasticsearch-url=&lt;your elasticsearch https url&gt;\n</code></pre> <p>Configure <code>elasticsearch-url</code> in the <code>orc8r-eventd</code> charm:</p> <pre><code>juju config orc8r-eventd elasticsearch-url=&lt;your elasticsearch http url&gt;\n</code></pre> <p>Confirm changes by visiting <code>https://&lt;your org name&gt;.nms.&lt;your domain&gt;</code> and checking  the <code>Events</code> chart of your network's dashboard.</p>"}]}